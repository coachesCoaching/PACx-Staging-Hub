<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Admin • PACx</title>
<style>
:root{--bg:#0f1223;--panel:#161a2e;--text:#eaf0ff;--sub:#a8b1d1;--border:#2a2f4a;--mint:#56f3a6;--accent:#37b9f1}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}
.wrap{max-width:980px;margin:0 auto;padding:34px 20px 80px}
.hdr{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.brand{display:flex;align-items:center;gap:10px;font-weight:900}
.dot{width:26px;height:26px;border-radius:50%;background:linear-gradient(135deg,#2fb8ff,#7cf8c8)}
.btn{background:transparent;color:var(--text);border:1px solid var(--border);padding:10px 14px;border-radius:12px;text-decoration:none;font-weight:700}
.btn:hover{outline:2px solid #2a365f}
.h1{font-size:28px;color:var(--mint);margin:8px 0 4px;font-weight:900}
.panel{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:16px;margin-top:12px}
.item{border:1px dashed var(--border);border-radius:12px;padding:14px;margin:10px 0;display:grid;gap:10px}
.row{display:flex;gap:10px}
.row input{flex:1}
label{font-size:12px;color:var(--sub)}
input,textarea{width:100%;background:#0f1223;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px}
.actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
.primary{background:#3be281;color:#02100a;border:none;border-radius:12px;padding:12px 16px;font-weight:800;cursor:pointer}
.secondary{background:transparent;color:var(--text);border:1px solid var(--border);border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
.drag{cursor:grab; user-select:none; background:#12203f;border:1px solid #2a365f;border-radius:10px;padding:8px 10px;font-size:12px;width:max-content}
.remove{background:#2a2f4a;border:1px solid #444;color:#ffb0b0;border-radius:10px;padding:8px 10px;font-weight:700;cursor:pointer}
.ghost{opacity:.5}
.topright{position:fixed;right:14px;top:14px}
.topright a{background:#1f2642;border:1px solid var(--border);padding:8px 10px;border-radius:10px;font-weight:700;text-decoration:none;color:var(--text)}
.topright a:hover{outline:2px solid #2a365f}
</style>
</head>
<body>
  <div class="topright"><a href="#" onclick="alert('Collaborate live with PACx.');return false;">Co-Create with PACx</a></div>

  <div class="wrap">
    <div class="hdr">
      <div class="brand"><span class="dot"></span> Admin</div>
      <div style="display:flex;gap:10px">
        <a class="btn" href="index.html">← Back to Hub</a>
        <a class="btn" href="canvas-demo.html">Open Canvas Hub</a>
      </div>
    </div>

    <div class="h1">Canvas Tiles</div>
    <div class="panel">
      <div class="row" style="justify-content:space-between;align-items:center">
        <div style="color:var(--sub)">Add, rename, update links, and drag to reorder. Click <b>Save Tiles</b> then refresh the Canvas Hub.</div>
        <button class="secondary" id="add">+ Add Tile</button>
      </div>
      <div id="list"></div>
      <div class="actions">
        <button class="primary" id="save">Save Tiles</button>
        <button class="secondary" id="reset">Reset to Defaults</button>
      </div>
    </div>
  </div>

<script>
const KEY='pacx_canvas_tiles';
const defaults=[
  {t:"Ideal Client WOW! Segmentation",u:"https://chatgpt.com/canvas/shared/68b363ca0c108191b270f8ad2eafef0c",d:"Shared canvas link ending …ef0c."},
  {t:"PACx Minimal Game Flow — MVP",u:"https://chatgpt.com/canvas/shared/68b0ad23128888191adf8fbd08097610e",d:"Shared canvas link ending …610e."},
  {t:"PACx Mobile — Tap To Run (v2)",u:"https://chatgpt.com/canvas/shared/68b0a884b8fc81919f1ec53051d8846b",d:"Shared canvas link ending …846b."},
  {t:"PACx Onboarding Blueprint v1.0",u:"https://chatgpt.com/canvas/shared/68b4460de0408191a0869d3cd4a28241",d:"The blue print of flow for PACx"}
];

function load(){ try{ return JSON.parse(localStorage.getItem(KEY) || '[]') } catch(e){ return [] } }
function save(data){ localStorage.setItem(KEY, JSON.stringify(data)) }

const list=document.getElementById('list');
let tiles=load(); if(!tiles.length){ tiles=defaults.slice(); save(tiles) }

function render(){
  list.innerHTML='';
  tiles.forEach((tile,idx)=>{
    const wrap=document.createElement('div');
    wrap.className='item'; wrap.draggable=true; wrap.dataset.index=idx;

    wrap.innerHTML=`
      <div class="drag" title="Drag to reorder">⇅ Drag</div>
      <div>
        <label>Title</label>
        <input value="${tile.t||''}" data-field="t"/>
      </div>
      <div>
        <label>Canvas URL</label>
        <input value="${tile.u||''}" data-field="u" placeholder="https://chatgpt.com/canvas/shared/…"/>
      </div>
      <div>
        <label>Description (optional)</label>
        <input value="${tile.d||''}" data-field="d"/>
      </div>
      <button class="remove">Remove</button>
    `;

    // input handlers
    wrap.querySelectorAll('input').forEach(inp=>{
      inp.addEventListener('input', e=>{
        const f=e.target.dataset.field;
        tiles[idx][f]=e.target.value;
      });
    });
    wrap.querySelector('.remove').onclick=()=>{
      tiles.splice(idx,1); render();
    };

    // drag & drop
    wrap.addEventListener('dragstart', e=>{
      e.dataTransfer.setData('text/plain', idx);
      requestAnimationFrame(()=>wrap.classList.add('ghost'));
    });
    wrap.addEventListener('dragend', ()=>wrap.classList.remove('ghost'));
    wrap.addEventListener('dragover', e=>{
      e.preventDefault();
      const fromIdx=Number(e.dataTransfer.getData('text/plain'));
      const toIdx=Number(wrap.dataset.index);
      if(fromIdx===toIdx) return;
      // move visually by swapping in array
      const item=tiles.splice(fromIdx,1)[0];
      tiles.splice(toIdx,0,item);
      render();
    });

    list.appendChild(wrap);
  });
}

render();

document.getElementById('add').onclick=()=>{
  tiles.push({t:"New Canvas",u:"",d:""});
  render();
};

document.getElementById('save').onclick=()=>{
  // strip empties
  tiles = tiles.filter(t=> (t.t||'').trim() && (t.u||'').trim());
  save(tiles);
  alert('Saved! Open the Canvas Hub to see the updated order.');
};

document.getElementById('reset').onclick=()=>{
  if(confirm('Reset tiles to defaults?')){ tiles=defaults.slice(); save(tiles); render(); }
};
</script>
</body>
</html>
